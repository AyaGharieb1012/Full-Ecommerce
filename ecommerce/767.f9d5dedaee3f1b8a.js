"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[767],{6666:(v,d,l)=>{l.r(d),l.d(d,{LoginComponent:()=>b});var g=l(6814),o=l(95),f=l(1120),e=l(4769),s=l(304);function a(t,u){1&t&&(e.TgZ(0,"p",15),e._uU(1,"Email is required"),e.qZA())}function p(t,u){1&t&&(e.TgZ(0,"p",15),e._uU(1,"Email Not Vaild"),e.qZA())}function m(t,u){if(1&t&&(e.TgZ(0,"div",13),e.YNc(1,a,2,0,"p",14),e.YNc(2,p,2,0,"p",14),e.qZA()),2&t){const i=e.oxw();let n,r;e.xp6(1),e.Q6J("ngIf",null==(n=i.loginForm.get("email"))?null:n.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=i.loginForm.get("email"))?null:r.getError("email"))}}function h(t,u){1&t&&(e.TgZ(0,"p",15),e._uU(1,"password is required"),e.qZA())}function c(t,u){1&t&&(e.TgZ(0,"p",15),e._uU(1,"password must start with upperCase then from 6 to 10"),e.qZA())}function Z(t,u){if(1&t&&(e.TgZ(0,"div",13),e.YNc(1,h,2,0,"p",14),e.YNc(2,c,2,0,"p",14),e.qZA()),2&t){const i=e.oxw();let n,r;e.xp6(1),e.Q6J("ngIf",null==(n=i.loginForm.get("password"))?null:n.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(r=i.loginForm.get("password"))?null:r.getError("pattern"))}}function I(t,u){1&t&&(e.TgZ(0,"span"),e._UZ(1,"i",16),e.qZA())}function T(t,u){if(1&t&&(e.TgZ(0,"p",17),e._uU(1),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Oqu(i.errMsg)}}let b=(()=>{class t{constructor(i,n){this._AuthService=i,this._Router=n,this.errMsg="",this.isLoading=!1,this.loginForm=new o.cw({email:new o.NI("",[o.kI.required,o.kI.email]),password:new o.NI("",[o.kI.required,o.kI.pattern(/^[A-Z][a-z0-9]{6,20}$/)])})}handelForm(){const i=this.loginForm.value;this.isLoading=!0,1==this.loginForm.valid&&this._AuthService.login(i).subscribe({next:n=>{localStorage.setItem("etoken",n.token),this._AuthService.decodeUser(),"success"==n.message&&(this.isLoading=!1,this._Router.navigate(["./home"]))},error:n=>{this.errMsg=n.error.message,this.isLoading=!1}})}static#e=this.\u0275fac=function(n){return new(n||t)(e.Y36(s.e),e.Y36(f.F0))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],standalone:!0,features:[e.jDz],decls:20,vars:6,consts:[[1,"bg-main-light","p-4","rounded","my-3","w-75","mx-auto"],[1,"my-3"],[3,"formGroup","ngSubmit"],[1,"mb-2"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],["class","alert alert-danger small p-1",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],[1,"btn-main","d-block","ms-auto",3,"disabled"],[4,"ngIf"],["routerLink","/forget",1,"link-primary"],["class","alert alert-danger p-1 mb-0 text-center mx-auto w-50",4,"ngIf"],[1,"alert","alert-danger","small","p-1"],["class","mb-0",4,"ngIf"],[1,"mb-0"],[1,"fas","fa-spin","fa-spinner"],[1,"alert","alert-danger","p-1","mb-0","text-center","mx-auto","w-50"]],template:function(n,r){if(1&n&&(e.TgZ(0,"section",0)(1,"h1",1),e._uU(2,"Login Now:"),e.qZA(),e.TgZ(3,"form",2),e.NdJ("ngSubmit",function(){return r.handelForm()}),e.TgZ(4,"div",3)(5,"label",4),e._uU(6,"Email:"),e.qZA(),e._UZ(7,"input",5),e.qZA(),e.YNc(8,m,3,2,"div",6),e.TgZ(9,"div",3)(10,"label",7),e._uU(11,"password:"),e.qZA(),e._UZ(12,"input",8),e.qZA(),e.YNc(13,Z,3,2,"div",6),e.TgZ(14,"button",9),e._uU(15," Login "),e.YNc(16,I,2,0,"span",10),e.qZA(),e.TgZ(17,"a",11),e._uU(18,"forget Password"),e.qZA()(),e.YNc(19,T,2,1,"p",12),e.qZA()),2&n){let _,w;e.xp6(3),e.Q6J("formGroup",r.loginForm),e.xp6(5),e.Q6J("ngIf",(null==(_=r.loginForm.get("email"))?null:_.errors)&&(null==(_=r.loginForm.get("email"))?null:_.touched)),e.xp6(5),e.Q6J("ngIf",(null==(w=r.loginForm.get("password"))?null:w.errors)&&(null==(w=r.loginForm.get("password"))?null:w.touched)),e.xp6(1),e.Q6J("disabled",r.loginForm.invalid),e.xp6(2),e.Q6J("ngIf",r.isLoading),e.xp6(3),e.Q6J("ngIf",r.errMsg)}},dependencies:[g.ez,g.O5,o.UX,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,f.rH]})}return t})()},8784:(v,d,l)=>{l.d(d,{o:()=>e});class g extends Error{}function e(s,a){if("string"!=typeof s)throw new g("Invalid token specified: must be a string");a||(a={});const p=!0===a.header?0:1,m=s.split(".")[p];if("string"!=typeof m)throw new g(`Invalid token specified: missing part #${p+1}`);let h;try{h=function f(s){let a=s.replace(/-/g,"+").replace(/_/g,"/");switch(a.length%4){case 0:break;case 2:a+="==";break;case 3:a+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function o(s){return decodeURIComponent(atob(s).replace(/(.)/g,(a,p)=>{let m=p.charCodeAt(0).toString(16).toUpperCase();return m.length<2&&(m="0"+m),"%"+m}))}(a)}catch{return atob(a)}}(m)}catch(c){throw new g(`Invalid token specified: invalid base64 for part #${p+1} (${c.message})`)}try{return JSON.parse(h)}catch(c){throw new g(`Invalid token specified: invalid json for part #${p+1} (${c.message})`)}}g.prototype.name="InvalidTokenError"}}]);